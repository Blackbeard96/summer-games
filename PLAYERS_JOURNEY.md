# The Player's Journey: Story Mode

A narrative-driven progression system following the Hero's Journey structure through nine episodic challenges in the Nine Knowings MST universe.

## üéØ Overview

The Player's Journey is the story mode feature that guides students through a season-long narrative campaign. Players progress through 9 episodes, each with unique bosses, objectives, and rewards, following the classic Hero's Journey storytelling framework.

## üìñ The Hero's Journey Structure

The 9 episodes map to the traditional Hero's Journey stages:

### Act I: Departure (Episodes 1-3)
1. **The Xiotein Letter** - Call to Adventure
2. **Welcome to Xiotein** - Crossing the Threshold  
3. **The Overnight** - Trial by Illusion

### Act II: Initiation (Episodes 4-6)
4. **First Bloodroot** - The First Victory
5. **Thread the Rift** - The Trial of Trust
6. **Trial by Force** - Holding the Circle

### Act III: Return (Episodes 7-9)
7. **The Morning After** - Facing the Twelve
8. **The New Normal** - Classes Begin
9. **Pressure Points** - Top 12 Trial (Ascension)

## üéÆ Core Features

### Episode Structure
Each episode contains:
- **Lore**: Narrative dialogue from key characters
- **Objectives**: Required and optional goals to complete
- **Encounters**: Combat, puzzles, mechanics, and debuffs to overcome
- **Boss Battle**: Unique boss with phases, moves, and mechanics
- **Rewards**: Fixed rewards, choice rewards, PP, and XP
- **Gates**: Unlock requirements (previous episodes, level, power)

### Power Level System
Player power is calculated from:
- Unlocked Manifest moves (√ó10 each)
- Unlocked Action Cards (√ó15 each)
- Vault Strength (shield + firewall)
- Level progression

### Progression Mechanics
- **Linear Progression**: Episodes unlock sequentially
- **Power Gates**: Minimum power level required for each episode
- **Completion Tracking**: Track objectives, encounters, and boss defeats
- **Season Progress**: Overall completion percentage (0-100%)
- **Rewards System**: Fixed and choice-based rewards per episode

## üìã Episode Guide

### Episode 1: The Xiotein Letter
**Chapter**: 1 | **Power Required**: 50 | **Rewards**: 25 PP, 50 XP

**Summary**: The Call to Adventure - Receive your Manifest invitation and awaken your powers.

**Key Objectives**:
- Create your player profile ‚ö†Ô∏è
- Awaken your first Manifest move ‚ö†Ô∏è

**Boss**: Training Dummy (50 HP, 1 Phase)
- **Moves**: Basic Strike (10 damage)
- **Difficulty**: Tutorial

**Fixed Rewards**:
- Player Card
- Starter Artifact
- System Move: Shield Restoration

**Unlock Requirements**: None (Starting episode)

---

### Episode 2: Welcome to Xiotein
**Chapter**: 2 | **Power Required**: 75 | **Rewards**: 50 PP, 75 XP

**Summary**: Crossing the Threshold - Arrive at the school and meet your rivals.

**Key Objectives**:
- Complete the orientation puzzle ‚ö†Ô∏è
- Participate in sparring drills ‚ö†Ô∏è
- Meet your rivals (Allen, Khalil, Greg, Alejandra)

**Boss**: Arcadium Projection (100 HP, 1 Phase)
- **Moves**: System Pressure (debuff utility)
- **Difficulty**: Easy

**Fixed Rewards**:
- Action Card Slot
- Starter Card: Countermeasure

**Choice Rewards**: None

**Unlock Requirements**: Complete Episode 1, Level 2, 50 Power

---

### Episode 3: The Overnight
**Chapter**: 3 | **Power Required**: 100 | **Rewards**: 75 PP, 100 XP

**Summary**: Trial by Illusion - Face yourself to find yourself in the enchanted forest.

**Key Objectives**:
- Survive the illusion trials ‚ö†Ô∏è
- Reveal your personal Veils ‚ö†Ô∏è
- Maintain resolve throughout

**Boss**: The Forest Eye (150 HP, 2 Phases)
- **Moves**: 
  - Hallucination Pulse (multi-debuff utility)
- **Mechanics**: 
  - Dread Aura (Phase 2 trigger, 4 debuff for 5 turns)
- **Difficulty**: Medium

**Fixed Rewards**:
- Rune of Clarity
- Elemental Move L1

**Choice Rewards**:
- Light Radiance
- Empathy Coregulate

**Unlock Requirements**: Complete Episode 2, Level 3, 75 Power

---

### Episode 4: First Bloodroot
**Chapter**: 4 | **Power Required**: 125 | **Rewards**: 100 PP, 125 XP

**Summary**: The First Victory - Survive waves of illusions and corrupted beasts.

**Key Objectives**:
- Survive waves of corrupted beasts ‚ö†Ô∏è
- Avoid stackable Corrode effects ‚ö†Ô∏è
- Defeat all corrupted minions

**Boss**: Bloodroot Guardian (200 HP, 2 Phases)
- **Moves**:
  - Thorn Growth (3 debuff for 4 turns)
  - Acrid Sap (15 damage + 2 debuff for 5 turns)
- **Difficulty**: Medium-Hard

**Fixed Rewards**:
- Manifest Move L2
- Vault Materials: Shield Core

**Choice Rewards**:
- Earth Bulwark
- Crafting Hardening

**Unlock Requirements**: Complete Episode 3, Level 4, 100 Power

---

### Episode 5: Thread the Rift
**Chapter**: 5 | **Power Required**: 150 | **Rewards**: 125 PP, 150 XP

**Summary**: The Trial of Trust - An ever-shifting course that punishes mistimed moves.

**Key Objectives**:
- Hit 3 timing prompts with Perfect or higher ‚ö†Ô∏è
- No ally gets KO'd
- Coordinate moves with allies ‚ö†Ô∏è

**Boss**: Tatiana Avatar (250 HP, 2 Phases)
- **Moves**:
  - Discipline Check (20 damage + 4 debuff for 3 turns)
- **Mechanics**:
  - Parry Window (Turn-based, opens counter-attack opportunities)
- **Difficulty**: Hard

**Fixed Rewards**:
- Bond Token
- Elemental Move L2

**Choice Rewards**:
- Card: Timing Beacon
- Rune: Focus

**Unlock Requirements**: Complete Episode 4, Level 5, 125 Power

---

### Episode 6: Trial by Force
**Chapter**: 6 | **Power Required**: 175 | **Rewards**: 150 PP, 175 XP

**Summary**: Holding the Circle - Defend monoliths against summoned constructs.

**Key Objectives**:
- Defend all monoliths from destruction ‚ö†Ô∏è
- Survive the construct horde ‚ö†Ô∏è
- Defeat the Final Sentinel ‚ö†Ô∏è

**Boss**: Sentinel of the Ring (300 HP, 3 Phases)
- **Moves**:
  - Wave Summons (summons 2 adds for 3 turns)
  - Shield Shatter (25 damage + 5 debuff for 2 turns)
- **Difficulty**: Hard

**Fixed Rewards**:
- System Perk: Scout
- Action Card: Draw +1

**Choice Rewards**:
- Athletics: Pace Sync
- Writing: Publish Rally

**Unlock Requirements**: Complete Episode 5, Level 6, 150 Power

---

### Episode 7: The Morning After
**Chapter**: 7 | **Power Required**: 200 | **Rewards**: 175 PP, 200 XP

**Summary**: Facing the Twelve - Survivors meet the Top 12, learn of higher stakes.

**Key Objectives**:
- Participate in debate with upperclassmen ‚ö†Ô∏è
- Demonstrate precision in sparring ‚ö†Ô∏è
- Prove your worth to the Top 12

**Boss**: Isabel Reyes - #2 Ranked (350 HP, 2 Phases)
- **Moves**:
  - Line Pressure (3 debuff for 4 turns utility)
  - Perfect Guard (5 buff for 2 turns defense)
- **Difficulty**: Very Hard

**Fixed Rewards**:
- Truth Metal Card Slot
- Rare Card Choice

**Choice Rewards**:
- Light: Beacon
- Shadow: Veilstep
- Metal: Refraction

**Unlock Requirements**: Complete Episode 6, Level 7, 175 Power

---

### Episode 8: The New Normal
**Chapter**: 8 | **Power Required**: 225 | **Rewards**: 200 PP, 225 XP

**Summary**: Classes Begin - Students attend advanced classes, rivalries escalate.

**Key Objectives**:
- Attend advanced classes ‚ö†Ô∏è
- Handle escalating combat situations ‚ö†Ô∏è
- Demonstrate significant growth

**Boss**: Greg Weighted (400 HP, 2 Phases)
- **Moves**:
  - Slow Power (30 damage)
  - Explosive Speed (25 damage + 3 buff for 2 turns)
- **Mechanics**:
  - Momentum Build (Every 5 turns, gains 2 buff for 3 turns)
- **Difficulty**: Very Hard

**Fixed Rewards**:
- Manifest Move L3
- Firewall Module V1

**Choice Rewards**:
- Reading: Team Margin
- Earth: Pebbleguard

**Unlock Requirements**: Complete Episode 7, Level 8, 200 Power

---

### Episode 9: Pressure Points
**Chapter**: 9 | **Power Required**: 250 | **Rewards**: 250 PP, 300 XP

**Summary**: Top 12 Trial - Prove your worth before the Top 12 and ascend.

**Key Objectives**:
- Demonstrate strategy over brute force ‚ö†Ô∏è
- Defeat your chosen challenger ‚ö†Ô∏è
- Complete the ascension trial ‚ö†Ô∏è

**Boss**: Final Challenger (500 HP, 3 Phases)
- **Moves**:
  - Momentum Lock (4 debuff for 3 turns)
  - Finesse Fan (20 damage + 3 debuff for 2 turns)
- **Mechanics**:
  - Ascension Test (Phase 3 trigger, 5 buff for 5 turns)
- **Difficulty**: Extreme

**Fixed Rewards**:
- Ascension Level 3
- Rare Artifact Choice

**Choice Rewards - Path Selection**:
- **Path of Power**: +Shield Max, +Vault Fortify uptime
- **Path of Tempo**: +1 Energy cap, -1 cooldown on 1 skill
- **Path of Control**: +Status duration, +Status resistance

**Unlock Requirements**: Complete Episode 8, Level 9, 225 Power

---

## üéØ Implementation Details

### Database Collections

#### `storyProgress/{userId}`
```javascript
{
  currentEpisode: string,
  completedEpisodes: string[],
  totalProgress: number, // 0-100%
  seasonRewards: string[],
  episodeProgress: {
    [episodeId]: {
      isStarted: boolean,
      isCompleted: boolean,
      objectivesCompleted: string[],
      encountersCompleted: string[],
      bossDefeated: boolean,
      rewardsClaimed: boolean,
      completionDate?: Date
    }
  }
}
```

### Story Context API

**Available Hooks**:
```typescript
const {
  storyProgress,
  episodeProgress,
  currentEpisode,
  isLoading,
  error,
  
  // Actions
  startEpisode,
  completeObjective,
  completeEncounter,
  defeatBoss,
  claimRewards,
  unlockEpisode,
  
  // Utilities
  getEpisodeStatus,
  isEpisodeUnlocked,
  getEpisodeProgress
} = useStory();
```

### Episode Status States
- **Locked**: Requirements not met (grey, disabled)
- **Unlocked**: Available to play (blue, interactive)
- **Completed**: Successfully finished (green, checkmark)

### Power Level Calculation
```typescript
playerPower = 
  (unlockedMoves √ó 10) + 
  (unlockedCards √ó 15) + 
  (vaultShieldStrength) + 
  (vaultFirewall) + 
  (currentLevel)
```

## üé® UI Components

### Story Page (`/story`)
- **Episode Grid**: Cards showing all 9 episodes
- **Progress Bar**: Visual season completion (X/9 episodes)
- **Power Level Display**: Current player power
- **Episode Cards**: 
  - Status badge (Locked/Unlocked/Completed)
  - Chapter number
  - Episode title and summary
  - Recommended power with difficulty color
  - Rewards preview
  - Start button (if unlocked)

### Episode Detail Modal
Opens when clicking an episode card:
- Full episode lore with character dialogue
- Complete objectives list (required ‚ö†Ô∏è vs optional)
- Encounter descriptions
- Boss details and phases
- Full rewards breakdown (fixed + choices + PP/XP)
- Start Episode button

### Episode Battle Page (`/story/:episodeId/battle`)
Future implementation:
- Battle UI integration
- Objective tracking overlay
- Boss phase indicators
- Rewards claim screen

## üîß Integration Points

### Battle System
- Episode battles use `BattleEngine` component
- Boss moves and mechanics from `types/story.ts`
- Special episode-specific battle conditions
- Phase transitions and mechanics triggers

### Rewards System
Episodes grant:
- **Power Points (PP)**: Marketplace currency
- **Experience (XP)**: Level progression
- **Moves**: New combat abilities
- **Action Cards**: Strategic battle cards
- **Items/Artifacts**: Permanent upgrades
- **Vault Materials**: Defensive improvements

### Profile Integration
- Display current episode progress
- Show season completion percentage
- List collected season rewards
- Track total episodes completed

### Achievement System
Potential achievements:
- Complete first episode
- Complete Act I, II, III
- Complete all 9 episodes (Season Complete)
- Complete episode without dying
- Complete all objectives (main + optional)
- Perfect boss battles

## üìä Progression Balance

### Difficulty Curve
- **Episodes 1-3**: Tutorial ‚Üí Easy ‚Üí Medium
- **Episodes 4-6**: Medium-Hard ‚Üí Hard ‚Üí Hard
- **Episodes 7-9**: Very Hard ‚Üí Very Hard ‚Üí Extreme

### Power Requirements
Progressive power gates ensure players:
1. Complete earlier episodes first
2. Build up their kit through rewards
3. Learn mechanics gradually
4. Face appropriate challenges for their level

### Reward Scaling
- **PP Rewards**: 25 ‚Üí 50 ‚Üí 75 ‚Üí 100 ‚Üí 125 ‚Üí 150 ‚Üí 175 ‚Üí 200 ‚Üí 250
- **XP Rewards**: 50 ‚Üí 75 ‚Üí 100 ‚Üí 125 ‚Üí 150 ‚Üí 175 ‚Üí 200 ‚Üí 225 ‚Üí 300
- **Power Gates**: 50 ‚Üí 75 ‚Üí 100 ‚Üí 125 ‚Üí 150 ‚Üí 175 ‚Üí 200 ‚Üí 225 ‚Üí 250

## üé≠ Narrative Elements

### Key Characters
- **Sage**: Mysterious guide and mentor
- **Allen, Khalil, Greg, Alejandra**: Rival students
- **Tatiana**: Discipline-focused instructor
- **Isabel Reyes**: #2 ranked upperclassman
- **The Top 12**: Elite student council

### Story Themes
- **Self-discovery**: Facing inner fears and veils
- **Competition vs Cooperation**: Rivalries that teach
- **Growth through Challenge**: Progressive difficulty
- **Mastery**: From novice to ascension
- **Trust**: Learning to work with others
- **Strategy over Force**: Intelligence matters

### Lore Integration
Each episode builds on:
- The Nine Knowings system
- Manifest powers and their origins
- The Xiotein academy structure
- The Top 12 hierarchy
- Truth Metals and their properties
- Vault and Shield mechanics

## üöÄ Future Enhancements

### Planned Features
- [ ] Episode replay mode
- [ ] Difficulty settings (Normal, Hard, Nightmare)
- [ ] Speed-run timing
- [ ] Episode-specific leaderboards
- [ ] Cutscene animations
- [ ] Voice acting for key dialogue
- [ ] Episode challenge modifiers
- [ ] Hidden bonus objectives
- [ ] Secret episodes or epilogues
- [ ] Co-op episode mode
- [ ] Episode journal/codex

### Season 2 Planning
- New episode arc (Episodes 10-18?)
- Advanced boss mechanics
- Story branching choices
- Multiple endings
- New character arcs
- Expanded lore

## üéØ Educational Integration

### Learning Objectives
Episodes can tie to curriculum:
- **Episode 1**: Introduction, profile setup
- **Episode 2**: Orientation, classroom integration
- **Episode 3**: Self-reflection, emotional awareness
- **Episode 4**: Persistence, resilience
- **Episode 5**: Timing, coordination, teamwork
- **Episode 6**: Defense, resource management
- **Episode 7**: Debate, precision, communication
- **Episode 8**: Growth mindset, adaptation
- **Episode 9**: Strategy, critical thinking, mastery

### Assessment Opportunities
Teachers can:
- Track episode completion as milestones
- Review objective completion rates
- Monitor progression pace
- Identify struggling students (stuck on episodes)
- Reward episode completion with bonus PP

## üîç Troubleshooting

### Common Issues

**Q: Episode won't unlock**
A: Check that all required episodes are completed and power level meets minimum

**Q: Can't start episode battle**
A: Ensure StoryContext is properly loaded and episode is unlocked

**Q: Progress not saving**
A: Verify Firestore rules allow read/write to `storyProgress` collection

**Q: Power level seems incorrect**
A: Check that Battle Context is loaded with current vault, moves, and cards

**Q: Rewards not granted**
A: Ensure `claimRewards()` is called after boss defeat

### Debug Commands
```javascript
// View current story progress
window.debugStory()

// Unlock all episodes (dev only)
window.unlockAllEpisodes()

// Reset story progress
window.resetStoryProgress()

// Set power level
window.setPlayerPower(250)
```

## üìû Support

For issues with the Player's Journey system:
1. Check this documentation
2. Verify StoryContext integration in App.tsx
3. Check Firestore rules for storyProgress collection
4. Review browser console for errors
5. Ensure Battle Context is providing power level data

---

**Created**: October 2025  
**Version**: 1.0.0  
**Episodes**: 9 (Season 1)  
**Total Completion Time**: Estimated 15-20 hours  
**Recommended Play Session**: 1-2 episodes per week

